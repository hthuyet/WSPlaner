/*
 * @blinkmobile/angular-signature-pad: v1.0.1 | https://github.com/blinkmobile/angular-signature-pad#readme
 * (c) 2018 BlinkMobile | Released under the MIT license
 */
!function(e,n){if("function"==typeof define&&define.amd)define(["exports","angular","signature_pad","@blinkmobile/canvas-manipulation"],n);else if("undefined"!=typeof exports)n(exports,require("angular"),require("signature_pad"),require("@blinkmobile/canvas-manipulation"));else{var i={};n(i,e.angular,e.SignaturePad,e.canvasManipulation),e.angularSignaturePad=i}}(this,function(e,n,i,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(n),c=a(i),f=function(e){{if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}}(t);function a(e){return e&&e.__esModule?e:{default:e}}function o(a,e,o,n,i){if(c.default){var r=this,u=e[0],l=u.children[0],d=void 0;l.width=u.clientWidth,l.height=u.clientHeight,r.$onDestroy=function(){d&&s.default.isFunction(d.off)&&d.off()},r.$onInit=function(){var e=r.options||{},i=function(){if(d&&!d.isEmpty()){var e,n=[r.imageType?r.imageType():void 0,r.imageEncoder?r.imageEncoder():void 0];return r.crop&&r.crop()?f.toDataURLCropped.apply(f,[l].concat(n)):(e=d).toDataURL.apply(e,n)}},n=function(e){if(s.default.isFunction(e))return function(){return a.$apply(function(){return e()})}};e.onBegin=n(e.onBegin);var t=e.onEnd;e.onEnd=n(function(){r.ngModel.$setViewValue(i()),s.default.isFunction(t)&&t()}),d=new c.default(l,e),r.resize&&r.resize({$fn:function(){var e=u.clientWidth,n=u.clientHeight;r.ngModel.$isEmpty()?(l.width=e,l.height=n):(f.resize(l,e,n,r.scaleDown&&r.scaleDown())||d.clear(),r.ngModel.$setViewValue(i()))}}),r.ngModel.$isEmpty=function(){return d.isEmpty()},r.ngModel.$render=function(){if(r.ngModel.$viewValue){var e=new Image;d._reset(),e.src=r.ngModel.$viewValue,e.onload=function(){f.drawImageCentered(l,e)},d._isEmpty=!1}else d.clear()},o.ngDisabled&&o.$observe("disabled",function(e){return e?d.off():d.on()})}}else i.error("SignaturePad is required")}o.$inject=["$scope","$element","$attrs","$window","$log"];var r={template:'<canvas class="signature-pad">Your browser does not support the HTML5 canvas tag.</canvas>',controller:o,require:{ngModel:"ngModel"},bindings:{options:"<?",crop:"&?",imageType:"&?",imageEncoder:"&?",scaleDown:"&?",resize:"&?"}};e.default=s.default.module("bmSignaturePad",[]).component("bmSignaturePad",r)});